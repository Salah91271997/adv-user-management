<div class="user-list-container">
  <p-card>
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>User Management</h2>
      <div class="flex gap-2">
        <button
          pButton
          label="Add User"
          icon="pi pi-plus"
          (click)="showCreateUserDialog()"
        ></button>
      </div>
    </div>

    <div class="d-flex justify-content-between">
      <span class="p-input-icon-left">
        <input
          type="text"
          pInputText
          (input)="onSearch($any($event.target).value)"
          placeholder="Search users..."
        />
      </span>
    </div>

    <app-user-table
      [users]="users"
      [loading]="loading"
      (edit)="onEdit($event)"
      (delete)="onDelete($event)"
      (impersonate)="onImpersonate($event)"
    >
    </app-user-table>
  </p-card>

  <p-dialog
    [(visible)]="showUserForm"
    [header]="selectedUser ? 'Edit User' : 'Create User'"
    [modal]="true"
    [style]="{ width: '50vw' }"
    (onHide)="hideUserForm()"
  >
    <app-user-form
      [user]="selectedUser"
      (save)="onUserFormSave($event)"
      (onCancel)="hideUserForm()"
    >
    </app-user-form>
  </p-dialog>

  <p-confirmDialog
    header="Confirmation"
    icon="pi pi-exclamation-triangle"
  ></p-confirmDialog>
</div>
